"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[570],{1570:function(e,t,a){a.r(t),a.d(t,{default:function(){return j}});var n=a(5893),r=a(5038),i=a(2798),s=a(6154);let l=async e=>{{let t=(0,i.n5)(!0)?"https://mailer.michalsalek.com/send":"http://172.27.61.32:7000/send";try{await s.Z.post(t,e),await Promise.resolve()}catch(e){(0,r.x)(e),await Promise.reject(e)}}};var o=a(3537),u=a(4416),c=a(7653),h=a(5861),m=a(1233),d=a(7294);let p=e=>{let{isSuccessfully:t}=e;return(0,n.jsx)(m.Z,{sx:{position:"absolute",top:"15%",p:5,backgroundColor:t?c.$.palette.success.main:c.$.palette.error.main,minHeight:"unset",maxWidth:"90%"},children:t?(0,n.jsx)(h.Z,{m:0,variant:"body1",color:u.e.transparentWhite,fontWeight:"500",children:"Your message has been sent. Thank you."}):(0,n.jsxs)(h.Z,{m:0,variant:"body1",color:u.e.transparentWhite,fontWeight:"500",children:["Connection problem here. Please send this message manually to: ",(0,n.jsx)("strong",{children:(0,o.G)()}),". Or try again."]})})},x=()=>{let[e,t]=(0,d.useState)(!1),[a,n]=(0,d.useState)(0),r=(0,d.useRef)(0);return(0,d.useEffect)(()=>{var t;return e?(r.current=null===(t=window)||void 0===t?void 0:t.setInterval(()=>{n(e=>e>=100?0:e+9)},190),()=>{clearInterval(r.current)}):(clearInterval(r.current),()=>void 0)},[e]),{loading:e,setLoading:t,loadingProgressValue:a,resetLoadingProgressValue:()=>{n(0)}}},y=()=>{let[e,t]=(0,d.useState)(!1),a=(0,d.useCallback)(async()=>{t(!0),await (0,i.yV)(100),t(!1),await (0,i.yV)(100),t(!0),await (0,i.yV)(100),t(!1),await (0,i.yV)(200),t(!0),await (0,i.yV)(200),t(!1)},[t]);return{booleanSwitch:e,setBooleanSwitch:t,doBlinkingAnimation:a}};var g=a(3321),v=a(8456),w=a(4054),b=a(3046),f=a(1163),j=()=>{let e=(0,f.useRouter)(),{about:t}=e.query,a=t?"[ ".concat(t," ]"):"",[r,s]=(0,d.useState)(""),[o,u]=(0,d.useState)(""),[h,j]=(0,d.useState)(a),[S,Z]=(0,d.useState)(""),C=(0,d.useMemo)(()=>!!(h&&S),[h,S]),k=()=>{j(""),Z("")},[E,W]=(0,d.useState)(!1),[V,I]=(0,d.useState)(!0),[D,G]=(0,d.useState)(!1),{loading:P,setLoading:R,loadingProgressValue:_,resetLoadingProgressValue:B}=x(),[M,N]=(0,d.useState)(!1),{booleanSwitch:T,setBooleanSwitch:$,doBlinkingAnimation:z}=y(),A=async()=>{G(!1),W(!1),await (0,i.yV)(100),V&&k(),$(!1),B()},O=async()=>{if(W(!0),!C){W(!1),await z();return}N(!0),R(!0),await (0,i.yV)(700);try{await l({subject:h,replyTo:r,text:S,signature:o}),I(!0)}catch(e){I(!1),$(!0)}R(!1),G(!0),N(!1)},Y=(0,d.useMemo)(()=>D&&V?"success":T?"error":"primary",[D,V,T]),{booleanSwitch:q,doBlinkingAnimation:H}=y();return(0,d.useEffect)(()=>{a&&setTimeout(H,800)},[H,a]),(0,n.jsx)(w.Z,{component:"form",onSubmit:async e=>{null==e||e.preventDefault(),D?await A():await O()},sx:{width:"100%"},children:(0,n.jsxs)(m.Z,{maxWidth:"1000px",justifyContent:"center",flexWrap:"wrap",alignItems:"baseline",rowGap:0,children:[(0,n.jsx)(m.Z,{flexDirection:"column",rowGap:0,flex:1,alignItems:"stretch",minWidth:"320px",children:(0,n.jsx)(b.Z,{error:T,disabled:E,label:"Email to reply *",placeholder:"Reply to",type:"email",autoComplete:"email",value:r,onChange:e=>s(e.target.value)})}),(0,n.jsxs)(m.Z,{flexDirection:"column",flex:2,rowGap:0,alignItems:"stretch",minWidth:"320px",children:[(0,n.jsx)(b.Z,{error:T,disabled:E,label:"Subject *",placeholder:"Email title",value:h,sx:q?{filter:"drop-shadow(0px 0px 1px ".concat(c.$.palette.info.main,")")}:void 0,onChange:e=>j(e.target.value)}),(0,n.jsxs)(m.Z,{sx:{position:"relative"},children:[(0,n.jsx)(b.Z,{error:T,disabled:E,multiline:!0,minRows:12,label:"Message *",placeholder:"Email body",value:S,onChange:e=>Z(e.target.value),sx:{width:"100%"}}),D&&(0,n.jsx)(p,{isSuccessfully:V})]}),(0,n.jsx)(b.Z,{disabled:E,label:"Your name",autoComplete:"given-name",value:o,onChange:e=>u(e.target.value)}),(0,n.jsx)(g.Z,{color:Y,type:"submit",variant:"contained",sx:{my:"2rem",height:"3rem",alignItems:"center",pointerEvents:M?"none":"all"},size:"large",children:P?(0,n.jsx)(v.Z,{thickness:20,size:24,color:"inherit",variant:"determinate",value:_}):D?"OK":"SEND"})]})]})})}}}]);